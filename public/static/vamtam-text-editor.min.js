class VamtamTextEditor extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{paragraph:"p:first",textEditor:".elementor-text-editor"},classes:{dropCap:"elementor-drop-cap",dropCapLetter:"elementor-drop-cap-letter"}}}getDefaultElements(){const e=this.getSettings("selectors"),t=this.getSettings("classes"),r=jQuery("<span>",{class:t.dropCap}),s=jQuery("<span>",{class:t.dropCapLetter});return r.append(s),{$paragraph:this.$element.find(e.paragraph),$textEditor:this.$element.find(e.textEditor),$dropCap:r,$dropCapLetter:s}}wrapDropCap(){const e=this.getElementSettings("drop_cap"),t=this.elements.$paragraph,r=this.elements.$textEditor.text();if(e){if(t.length||r&&(this.isTextNode=!0),t.length||this.isTextNode)if(this.isTextNode){const e=r[0];if(!e)return;this.dropCapLetter=e,this.elements.$dropCapLetter.text(e);const t=r.slice(e.length).replace(/^ */,e=>new Array(e.length+1).join("&nbsp;"));this.elements.$textEditor.html(t).prepend(this.elements.$dropCap)}else{const e=t.html().replace(/&nbsp;/g," "),r=e.match(/^ *([^ ] ?)/);if(!r)return;const s=r[1],n=s.trim();if("<"===n)return;this.dropCapLetter=s,this.elements.$dropCapLetter.text(n);const p=e.slice(s.length).replace(/^ */,e=>new Array(e.length+1).join("&nbsp;"));t.html(p).prepend(this.elements.$dropCap)}}else this.dropCapLetter&&(this.isTextNode?(this.elements.$dropCap.remove(),this.elements.$textEditor.text(r),this.isTextNode=!1):(this.elements.$dropCap.remove(),t.prepend(this.dropCapLetter),this.dropCapLetter=""))}onInit(...e){super.onInit(...e),this.wrapDropCap()}onElementChange(e){"drop_cap"===e&&this.wrapDropCap()}}jQuery(window).on("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/text-editor.default",e=>{elementorFrontend.elementsHandler.addHandler(VamtamTextEditor,{$element:e})},100)});
